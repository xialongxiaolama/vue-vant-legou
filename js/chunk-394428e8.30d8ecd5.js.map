{"version":3,"sources":["webpack:///./src/views/home/search/index.vue?9b34","webpack:///./src/api/home/search/index.js","webpack:///./src/views/home/goodlist/index.vue?ead7","webpack:///./src/views/home/goodlist/index.vue?f301","webpack:///./src/api/home/goodlist/index.js","webpack:///src/views/home/goodlist/index.vue","webpack:///./src/views/home/goodlist/index.vue?62a0","webpack:///./src/views/home/goodlist/index.vue","webpack:///./src/views/home/search/index.vue?2140","webpack:///src/views/home/search/index.vue","webpack:///./src/views/home/search/index.vue?a0fb","webpack:///./src/views/home/search/index.vue"],"names":["clearhistoryAction","data","axios","url","method","addhistoryaction","helperaction","indexaction","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","class","current","on","complex","_v","$event","sort","classfy","_l","item","key","id","goBuy","list_pic_url","_s","name","retail_price","staticRenderFns","goodlist","goodList","category","props","methods","init","$route","query","order","keyword","then","$router","push","created","component","onSearch","value","onCancel","model","callback","$$v","trim","expression","isShow","clearhistory","jump","_m","defaultKeyword","dataList","detail","hotKeywordList","historyData","components","localStorage","getItem","openId","val","go"],"mappings":"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","file":"js/chunk-394428e8.30d8ecd5.js","sourcesContent":["export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5bda07ec&lang=scss&scoped=true&\"","import axios from \"../../index\";\r\n\r\n// 清除搜索记录\r\nfunction clearhistoryAction(data) {\r\n  return axios({\r\n    url: \"search/clearhistoryAction\",\r\n    method: \"post\",\r\n    data,\r\n  });\r\n}\r\n// 添加搜索记录\r\nfunction addhistoryaction(data) {\r\n  return axios({\r\n    url: \"search/addhistoryaction\",\r\n    method: \"post\",\r\n    data,\r\n  });\r\n}\r\n//获得搜索数据\r\nfunction helperaction(data) {\r\n  return axios({\r\n    url: \"search/helperaction\",\r\n    data,\r\n  });\r\n}\r\n// 获取历史数据\r\nfunction indexaction(data) {\r\n  return axios({\r\n    url: \"search/indexaction\",\r\n    data,\r\n  });\r\n}\r\nexport { clearhistoryAction, addhistoryaction, helperaction, indexaction };\r\n","export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=11bcca0d&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"goods\"},[_c('img',{attrs:{\"src\":\"http://yanxuan.nosdn.127.net/8976116db321744084774643a933c5ce.png\",\"alt\":\"\"}}),_c('div',{staticClass:\"nav\"},[_c('p',{class:_vm.current == 'default' ? 'active' : '',on:{\"click\":_vm.complex}},[_vm._v(\"综合\")]),_c('div',{staticClass:\"sort\",on:{\"click\":function($event){return _vm.sort()}}},[_c('span',{class:_vm.current == 'price' ? 'active' : ''},[_vm._v(\" 价格 \")]),_c('div',[_c('van-icon',{attrs:{\"name\":\"arrow-up\",\"size\":\"6px\",\"color\":_vm.current == 'price' ? '#BD282D' : ''}}),_c('van-icon',{attrs:{\"name\":\"arrow-down\",\"size\":\"6px\",\"color\":_vm.current == 'asc' ? '#BD282D' : ''}})],1)]),_c('p',{class:_vm.current == 'sort' ? 'active' : '',on:{\"click\":_vm.classfy}},[_vm._v(\"分类\")])]),_c('ul',{staticClass:\"info\"},_vm._l((_vm.goodList),function(item){return _c('li',{key:item.id,on:{\"click\":function($event){return _vm.goBuy(item.id)}}},[_c('img',{attrs:{\"src\":item.list_pic_url,\"alt\":\"\"}}),_c('div',[_c('h4',[_vm._v(_vm._s(item.name))]),_c('span',[_vm._v(\"￥\"+_vm._s(item.retail_price))])])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from \"../../index\";\r\n//获得分类商品列表\r\nfunction goodlist(data) {\r\n  return axios({\r\n    url: \"goods/goodsList\",\r\n    data,\r\n  });\r\n}\r\nexport { goodlist };\r\n","<template>\r\n  <div class=\"goods\">\r\n    <img\r\n      src=\"http://yanxuan.nosdn.127.net/8976116db321744084774643a933c5ce.png\"\r\n      alt=\"\"\r\n    />\r\n    <div class=\"nav\">\r\n      <p @click=\"complex\" :class=\"current == 'default' ? 'active' : ''\">综合</p>\r\n      <div class=\"sort\" @click=\"sort()\">\r\n        <span :class=\"current == 'price' ? 'active' : ''\"> 价格 </span>\r\n        <div>\r\n          <van-icon\r\n            name=\"arrow-up\"\r\n            size=\"6px\"\r\n            :color=\"current == 'price' ? '#BD282D' : ''\"\r\n          /><van-icon\r\n            name=\"arrow-down\"\r\n            size=\"6px\"\r\n            :color=\"current == 'asc' ? '#BD282D' : ''\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <p :class=\"current == 'sort' ? 'active' : ''\" @click=\"classfy\">分类</p>\r\n    </div>\r\n    <ul class=\"info\">\r\n      <li v-for=\"item in goodList\" :key=\"item.id\" @click=\"goBuy(item.id)\">\r\n        <img :src=\"item.list_pic_url\" alt=\"\" />\r\n        <div>\r\n          <h4>{{ item.name }}</h4>\r\n          <span>￥{{ item.retail_price }}</span>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { goodlist } from \"../../../api/home/goodlist/index\";\r\nimport { helperaction } from \"../../../api/home/search\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      goodList: [],\r\n      current: \"default\",\r\n      category: {},\r\n    };\r\n  },\r\n  props: [\"keyword\"],\r\n  methods: {\r\n    // 初始化加载页面\r\n    init() {\r\n      //查询分类id\r\n      this.category = this.$route.query;\r\n      this.category.order =\r\n        this.current == \"default\"\r\n          ? \"\"\r\n          : this.current == \"sort\"\r\n          ? \"\"\r\n          : this.current == \"price\"\r\n          ? \"asc\"\r\n          : \"desc\";\r\n      if (!this.keyword) {\r\n        // 查询参数\r\n        goodlist(this.category).then((res) => {\r\n          this.goodList = res.data.data;\r\n        });\r\n      } else {\r\n        helperaction({\r\n          keyword: this.keyword,\r\n          order:\r\n            this.current == \"default\"\r\n              ? \"\"\r\n              : this.current == \"sort\"\r\n              ? \"\"\r\n              : this.current == \"price\"\r\n              ? \"asc\"\r\n              : \"desc\",\r\n        }).then((res) => {\r\n          this.goodList = res.data.keywords;\r\n        });\r\n      }\r\n    },\r\n    // 点击综合排序\r\n    complex() {\r\n      this.current = \"default\";\r\n      this.init();\r\n    },\r\n    //点击价格 排序\r\n    sort() {\r\n      if (this.current == \"price\") {\r\n        this.current = \"asc\";\r\n        this.init();\r\n      } else {\r\n        this.current = \"price\";\r\n        this.init();\r\n      }\r\n    },\r\n    //点击分类\r\n    classfy() {\r\n      this.current = \"sort\";\r\n      this.init();\r\n    },\r\n    // 跳转到购买页面\r\n    goBuy(id) {\r\n      this.$router.push({ name: \"buy\", query: { id } });\r\n    },\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.goods {\r\n  background-color: #eee;\r\n  img {\r\n    width: 100%;\r\n  }\r\n  .nav {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    height: 40px;\r\n    align-items: center;\r\n    background-color: #fff;\r\n    border-bottom: 1px solid #eee;\r\n    .sort {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      div {\r\n        margin-left: 5px;\r\n        display: flex;\r\n        flex-direction: column;\r\n      }\r\n    }\r\n    .active {\r\n      color: #bd282d;\r\n    }\r\n  }\r\n  .info {\r\n    display: flex;\r\n    margin-top: 10px;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    background-color: #fff;\r\n    li {\r\n      padding-top: 10px;\r\n      width: 50%;\r\n      margin-bottom: 3px;\r\n      border-top: 2px solid #eee;\r\n      border-right: 2px solid #eee;\r\n      box-sizing: border-box;\r\n    }\r\n    img {\r\n      width: 150px;\r\n      height: 150px;\r\n    }\r\n    div {\r\n      h4 {\r\n        margin: 7px auto;\r\n        line-height: 16px;\r\n        font-size: 12px;\r\n      }\r\n      span {\r\n        display: block;\r\n        margin: 15px auto;\r\n        font-size: 15px;\r\n        line-height: 20px;\r\n        color: #b4282d;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=11bcca0d&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=11bcca0d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11bcca0d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"index\"},[_c('form',{attrs:{\"action\":\"/\"}},[_c('van-search',{attrs:{\"show-action\":\"\",\"placeholder\":\"商品搜索\"},on:{\"input\":function($event){return _vm.onSearch(_vm.value)},\"cancel\":_vm.onCancel},model:{value:(_vm.value),callback:function ($$v) {_vm.value=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"value\"}})],1),(_vm.isShow == 'default')?_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"title\"},[_c('p',[_vm._v(\"历史记录\")]),_c('p',{staticClass:\"box\",on:{\"click\":_vm.clearhistory}})]),_c('ul',_vm._l((_vm.historyData),function(item){return _c('li',{key:item.id,on:{\"click\":function($event){return _vm.jump(item.keyword)}}},[_vm._v(\" \"+_vm._s(item.keyword)+\" \")])}),0)]),_c('div',{staticClass:\"card\"},[_vm._m(0),_c('ul',_vm._l((_vm.hotKeywordList),function(item){return _c('li',{key:item.id,class:item.keyword == _vm.defaultKeyword ? 'active' : '',on:{\"click\":function($event){return _vm.jump(item.keyword)}}},[_vm._v(\" \"+_vm._s(item.keyword)+\" \")])}),0)])]):(_vm.isShow == 'search')?_c('ul',{staticClass:\"text\"},_vm._l((_vm.dataList),function(item){return _c('li',{key:item.id,on:{\"click\":function($event){return _vm.jump(item.name)}}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),0):_c('div',{staticClass:\"goods\"},[_c('goodlist',{attrs:{\"keyword\":_vm.keyword}})],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title\"},[_c('p',[_vm._v(\"热门搜索\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"index\">\r\n    <form action=\"/\">\r\n      <van-search\r\n        show-action\r\n        v-model.trim=\"value\"\r\n        @input=\"onSearch(value)\"\r\n        placeholder=\"商品搜索\"\r\n        @cancel=\"onCancel\"\r\n      />\r\n    </form>\r\n    <!-- 默认显示搜索记录 -->\r\n    <div class=\"box\" v-if=\"isShow == 'default'\">\r\n      <div class=\"card\">\r\n        <div class=\"title\">\r\n          <p>历史记录</p>\r\n          <p class=\"box\" @click=\"clearhistory\"></p>\r\n        </div>\r\n        <ul>\r\n          <li\r\n            v-for=\"item in historyData\"\r\n            @click=\"jump(item.keyword)\"\r\n            :key=\"item.id\"\r\n          >\r\n            {{ item.keyword }}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"card\">\r\n        <div class=\"title\">\r\n          <p>热门搜索</p>\r\n        </div>\r\n        <ul>\r\n          <li\r\n            v-for=\"item in hotKeywordList\"\r\n            :key=\"item.id\"\r\n            :class=\"item.keyword == defaultKeyword ? 'active' : ''\"\r\n            @click=\"jump(item.keyword)\"\r\n          >\r\n            <!-- 点击搜索记录跳转到 商品页表\r\n        传值方式:1.通过点击将值存到本地数据,在新页面读取本地数据 2.通过路由传值跳转\r\n         -->\r\n            {{ item.keyword }}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <!-- 是否显示搜索结果 -->\r\n    <ul class=\"text\" v-else-if=\"isShow == 'search'\">\r\n      <li v-for=\"item in dataList\" :key=\"item.id\" @click=\"jump(item.name)\">\r\n        {{ item.name }}\r\n      </li>\r\n    </ul>\r\n    <!-- 显示商品列表 -->\r\n    <div class=\"goods\" v-else>\r\n      <goodlist :keyword=\"keyword\"></goodlist>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport goodlist from \"../goodlist/index\";\r\nimport { Toast } from \"vant\";\r\nimport {\r\n  helperaction,\r\n  addhistoryaction,\r\n  clearhistoryAction,\r\n  indexaction,\r\n} from \"../../../api/home/search\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      value: \"\",\r\n      dataList: [],\r\n      detail: {},\r\n      isShow: \"default\",\r\n      defaultKeyword: \"\",\r\n      hotKeywordList: [],\r\n      historyData: [],\r\n      keyword: \"\",\r\n    };\r\n  },\r\n  components: {\r\n    goodlist,\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    //   初始化记录\r\n    init() {\r\n      var openId = localStorage.getItem(\"openId\");\r\n      indexaction({\r\n        openId: \"66\",\r\n      }).then((res) => {\r\n        this.defaultKeyword = res.data.defaultKeyword.keyword;\r\n        this.historyData = res.data.historyData;\r\n        this.hotKeywordList = res.data.hotKeywordList;\r\n      });\r\n    },\r\n    // 清楚历史记录\r\n    clearhistory() {\r\n      clearhistoryAction({ openId: localStorage.getItem(\"openId\") }).then(\r\n        (res) => {\r\n          Toast(\"清除成功!\");\r\n          //   调用初始化数据\r\n          this.init();\r\n        }\r\n      );\r\n    },\r\n    //搜索事件\r\n    onSearch(val) {\r\n      helperaction({\r\n        keyword: val,\r\n        order: \"\",\r\n      }).then((res) => {\r\n        this.dataList = res.data.keywords;\r\n      });\r\n      if (val == \"\") {\r\n        this.isShow = \"default\";\r\n      } else {\r\n        this.isShow = \"search\";\r\n      }\r\n      this.init();\r\n    },\r\n\r\n    //取消事件\r\n    onCancel() {\r\n      this.$router.go(-1);\r\n    },\r\n    // 获取详情信息  把关键词保存在本地,然后在套用的组件中得到关键词,对数据进行搜索\r\n    jump(val) {\r\n      this.isShow = \"goods\";\r\n      this.keyword = val;\r\n      //把搜索数据保存\r\n      addhistoryaction({\r\n        keyword: val,\r\n        openId: localStorage.getItem(\"openId\"),\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.index {\r\n  background-color: #eee;\r\n  .text {\r\n    padding-left: 20px;\r\n    background-color: #fff;\r\n    li {\r\n      font-size: 12px;\r\n      line-height: 28px;\r\n      height: 28px;\r\n      color: #000;\r\n      text-align: left;\r\n    }\r\n  }\r\n  .card {\r\n    margin-top: 10px;\r\n    background-color: #fff;\r\n    overflow: hidden;\r\n    .title {\r\n      display: flex;\r\n      align-content: center;\r\n      justify-content: space-between;\r\n      padding-left: 20px;\r\n      margin: 15px auto;\r\n      p {\r\n        margin: 0;\r\n        line-height: 27px;\r\n      }\r\n      .box {\r\n        width: 27px;\r\n        height: 27px;\r\n        background: url(\"http://nos.netease.com/mailpub/hxm/yanxuan-wap/p/20150730/style/img/icon-normal/del1-93f0a4add4.png\")\r\n          no-repeat;\r\n        background-size: 100% 100%;\r\n      }\r\n    }\r\n    ul {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      padding-left: 20px;\r\n      li {\r\n        padding: 5px 10px;\r\n        border: 1px solid #999;\r\n        margin: 0 10px 15px 0;\r\n        box-sizing: border;\r\n      }\r\n      .active {\r\n        border: 1px solid #bd282d;\r\n        color: #bd282d;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>>\r\n","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5bda07ec&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5bda07ec&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5bda07ec\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}